================================================================================
BASELINE COMPLEXITY METRICS - install_hooks.py Target Functions
================================================================================
Analysis Date: 2026-01-10

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SUMMARY COMPARISON TABLE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metric             â”‚ detect_claude  â”‚ _parse_mcp     â”‚ validate_mcp       â”‚
â”‚                    â”‚ _config        â”‚ _get_output    â”‚ _prerequisites     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Priority           â”‚ P2 (Medium)    â”‚ P0 (CRITICAL)  â”‚ P1 (High)          â”‚
â”‚ Lines              â”‚ 198-236 (39)   â”‚ 238-268 (31)   â”‚ 351-385 (35)       â”‚
â”‚ Complexity (radon) â”‚ B (9)          â”‚ C (12) ğŸ”´      â”‚ C (12) ğŸ”´          â”‚
â”‚ Nesting Depth      â”‚ 5 levels ğŸ”´    â”‚ 9 levels ğŸ”´ğŸ”´  â”‚ 4 levels ğŸŸ¡        â”‚
â”‚ If Statements      â”‚ 3              â”‚ 7              â”‚ 8                  â”‚
â”‚ For Loops          â”‚ 1              â”‚ 1              â”‚ 0                  â”‚
â”‚ Try/Except         â”‚ 4              â”‚ 2              â”‚ 0                  â”‚
â”‚ Boolean Ops        â”‚ 4 âœ…           â”‚ 5 ğŸŸ¡           â”‚ 12 ğŸ”´ğŸ”´            â”‚
â”‚ Security Issues    â”‚ 2 (LOW)        â”‚ 0              â”‚ 0                  â”‚
â”‚ Target Complexity  â”‚ â‰¤6 (A)         â”‚ â‰¤6 (A)         â”‚ â‰¤5 (A)             â”‚
â”‚ Target Nesting     â”‚ â‰¤3 levels      â”‚ â‰¤3 levels      â”‚ â‰¤3 levels          â”‚
â”‚ Estimated Effort   â”‚ 1-2 hours      â”‚ 2-3 hours      â”‚ 2-3 hours          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FILE-LEVEL METRICS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metric                                 â”‚ Current        â”‚ Target           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total LOC                              â”‚ 1454           â”‚ -                â”‚
â”‚ Maintainability Index                  â”‚ C (2.38) ğŸ”´    â”‚ B (â‰¥5.0) âœ…      â”‚
â”‚ Average Complexity                     â”‚ B (7.7) ğŸŸ¡     â”‚ A (â‰¤5.0) âœ…      â”‚
â”‚ Worst Function                         â”‚ main() F (42)  â”‚ (not in scope)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CRITICAL ISSUES                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. _parse_mcp_get_output() - 9 NESTING LEVELS ğŸ”´ğŸ”´                          â”‚
â”‚    - Worst offender in entire file                                         â”‚
â”‚    - Try â†’ For â†’ If â†’ Elif chain                                           â”‚
â”‚    - IMMEDIATE refactoring required                                        â”‚
â”‚                                                                             â”‚
â”‚ 2. validate_mcp_prerequisites() - 12 BOOLEAN OPERATORS ğŸ”´ğŸ”´                 â”‚
â”‚    - Hard to test                                                           â”‚
â”‚    - Complex conditional logic                                              â”‚
â”‚    - Multiple concerns mixed                                                â”‚
â”‚                                                                             â”‚
â”‚ 3. detect_claude_mcp_configuration() - 4 TRY/EXCEPT BLOCKS ğŸŸ¡              â”‚
â”‚    - Over-engineered exception handling                                     â”‚
â”‚    - Mixed concerns (detection + parsing + fallback)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EXPECTED IMPROVEMENTS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Readability:     67% reduction in nesting (9 â†’ 3 levels)                 â”‚
â”‚ âœ… Testability:     58% reduction in boolean complexity (12 â†’ <5)           â”‚
â”‚ âœ… Maintainability: File MI improves C (2.38) â†’ B (5.0+)                    â”‚
â”‚ âœ… Security:        Eliminate 2 LOW severity subprocess issues              â”‚
â”‚ âœ… Performance:     No expected changes (pure refactoring)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VALIDATION COMMANDS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ # Check cyclomatic complexity                                              â”‚
â”‚ source .venv-analysis/bin/activate                                         â”‚
â”‚ radon cc claude-hooks/install_hooks.py -s -a                               â”‚
â”‚                                                                             â”‚
â”‚ # Check maintainability index                                              â”‚
â”‚ radon mi claude-hooks/install_hooks.py -s                                  â”‚
â”‚                                                                             â”‚
â”‚ # Check nesting depth (custom)                                             â”‚
â”‚ python3 /tmp/analyze_functions.py                                          â”‚
â”‚                                                                             â”‚
â”‚ # Security scan                                                             â”‚
â”‚ bandit -r claude-hooks/install_hooks.py                                    â”‚
â”‚                                                                             â”‚
â”‚ # Compare before/after                                                      â”‚
â”‚ diff .metrics/baseline_cc_install_hooks.txt \                              â”‚
â”‚      .metrics/after_cc_install_hooks.txt                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
REFACTORING ORDER (RECOMMENDED)
================================================================================

Phase 1: _parse_mcp_get_output() - P0 CRITICAL
  â”œâ”€ Extract field parser dictionary
  â”œâ”€ Replace if/elif with lookup table
  â”œâ”€ Reduce nesting 9 â†’ 3 levels
  â””â”€ Expected: C (12) â†’ A (4), Nesting 9 â†’ 3
  Time: 2-3 hours

Phase 2: validate_mcp_prerequisites() - P1 HIGH
  â”œâ”€ Extract validation rules
  â”œâ”€ Create validator classes
  â”œâ”€ Reduce boolean complexity 12 â†’ 3
  â””â”€ Expected: C (12) â†’ A (5), Boolean ops 12 â†’ 3
  Time: 2-3 hours

Phase 3: detect_claude_mcp_configuration() - P2 MEDIUM
  â”œâ”€ Extract subprocess helpers
  â”œâ”€ Simplify exception handling
  â”œâ”€ Reduce nesting 5 â†’ 3 levels
  â””â”€ Expected: B (9) â†’ A (5), Nesting 5 â†’ 3
  Time: 1-2 hours

TOTAL ESTIMATED EFFORT: 5-8 hours

================================================================================
SUCCESS CRITERIA CHECKLIST
================================================================================

Function-Level:
  [ ] _parse_mcp_get_output: Complexity â‰¤6, Nesting â‰¤3
  [ ] validate_mcp_prerequisites: Complexity â‰¤5, Boolean ops <5
  [ ] detect_claude_mcp_configuration: Complexity â‰¤6, Nesting â‰¤3

File-Level:
  [ ] Maintainability Index â‰¥5.0 (B grade or better)
  [ ] Average Complexity â‰¤5.0 (A grade)
  [ ] No new security issues introduced
  [ ] All existing tests pass
  [ ] Test coverage maintained or increased

================================================================================
